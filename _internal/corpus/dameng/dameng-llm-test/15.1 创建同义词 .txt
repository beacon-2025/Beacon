-- 创建用户A并赋予权限
CREATE USER A IDENTIFIED BY 'passwordA';
GRANT CREATE SYNONYM TO A;
GRANT CREATE TABLE TO A;
-- 创建用户B并赋予权限
CREATE USER B IDENTIFIED BY 'passwordB';
GRANT CREATE SYNONYM TO B;
GRANT CREATE TABLE TO B;
-- 创建用户C并赋予权限
CREATE USER C IDENTIFIED BY 'passwordC';
GRANT CREATE SYNONYM TO C;
GRANT CREATE TABLE TO C;
-- 创建用户D并赋予权限
CREATE USER D IDENTIFIED BY 'passwordD';
GRANT CREATE PUBLIC SYNONYM TO D;
GRANT RESOURCE TO D;
-- 用户A创建表T1
CREATE TABLE A.T1 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户A插入数据到表T1
INSERT INTO A.T1 (ID, NAME) VALUES (1, '张三');
INSERT INTO A.T1 (ID, NAME) VALUES (2, '李四');
-- 用户A创建同义词S1
CREATE SYNONYM A.S1 FOR A.T1;
-- 用户B查询表T1的行数
SELECT COUNT(*) FROM A.S1;
-- 用户A创建表T2
CREATE TABLE A.T2 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户A插入数据到表T2
INSERT INTO A.T2 (ID, NAME) VALUES (1, '王五');
INSERT INTO A.T2 (ID, NAME) VALUES (2, '赵六');
-- 用户D创建全局同义词S2
CREATE PUBLIC SYNONYM S2 FOR A.T2;
-- 用户B查询表T2的行数
SELECT COUNT(*) FROM S2;
-- 用户B创建表T3
CREATE TABLE B.T3 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户B插入数据到表T3
INSERT INTO B.T3 (ID, NAME) VALUES (1, '孙七');
INSERT INTO B.T3 (ID, NAME) VALUES (2, '周八');
-- 用户B创建同义词S3
CREATE SYNONYM B.S3 FOR B.T3;
-- 用户B替换同义词S3
CREATE OR REPLACE SYNONYM B.S3 FOR B.T3;
-- 用户C查询表T3的行数
SELECT COUNT(*) FROM B.S3;
-- 用户C创建表T4
CREATE TABLE C.T4 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户C插入数据到表T4
INSERT INTO C.T4 (ID, NAME) VALUES (1, '吴九');
INSERT INTO C.T4 (ID, NAME) VALUES (2, '郑十');
-- 用户D创建全局同义词S4
CREATE PUBLIC SYNONYM S4 FOR C.T4;
-- 用户D替换全局同义词S4
CREATE OR REPLACE PUBLIC SYNONYM S4 FOR C.T4;
-- 用户A查询表T4的行数
SELECT COUNT(*) FROM S4;
-- 用户D创建函数GET_DBA2
CREATE OR REPLACE FUNCTION GET_DBA2(a INT, b INT) RETURN INT AS
BEGIN
    RETURN a + b;
END;
/

-- 用户D创建全局同义词SP_CLOSE_SESSION
CREATE OR REPLACE PUBLIC SYNONYM SP_CLOSE_SESSION FOR GET_DBA2;
-- 用户D调用同义词SP_CLOSE_SESSION
CALL SP_CLOSE_SESSION(1, 2);
-- 用户A创建表T5
CREATE TABLE A.T5 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户A插入数据到表T5
INSERT INTO A.T5 (ID, NAME) VALUES (1, '钱十一');
INSERT INTO A.T5 (ID, NAME) VALUES (2, '孙十二');
-- 用户A创建同义词S5
CREATE SYNONYM A.S5 FOR A.T5;
-- 用户B查询表T5的行数
SELECT COUNT(*) FROM A.S5;
-- 用户B创建表T6
CREATE TABLE B.T6 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户B插入数据到表T6
INSERT INTO B.T6 (ID, NAME) VALUES (1, '李十三');
INSERT INTO B.T6 (ID, NAME) VALUES (2, '王十四');
-- 用户D创建全局同义词S6
CREATE PUBLIC SYNONYM S6 FOR B.T6;
-- 用户C查询表T6的行数
SELECT COUNT(*) FROM S6;
-- 用户C创建表T7
CREATE TABLE C.T7 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户C插入数据到表T7
INSERT INTO C.T7 (ID, NAME) VALUES (1, '赵十五');
INSERT INTO C.T7 (ID, NAME) VALUES (2, '钱十六');
-- 用户C创建同义词S7
CREATE SYNONYM C.S7 FOR C.T7;
-- 用户C替换同义词S7
CREATE OR REPLACE SYNONYM C.S7 FOR C.T7;
-- 用户D查询表T7的行数
SELECT COUNT(*) FROM C.S7;
-- 用户D创建表T8
CREATE TABLE D.T8 (ID INTEGER, NAME VARCHAR(50), PRIMARY KEY(ID));
-- 用户D插入数据到表T8
INSERT INTO D.T8 (ID, NAME) VALUES (1, '孙十七');
INSERT INTO D.T8 (ID, NAME) VALUES (2, '李十八');
-- 用户D创建全局同义词S8
CREATE PUBLIC SYNONYM S8 FOR D.T8;
-- 用户D替换全局同义词S8
CREATE OR REPLACE PUBLIC SYNONYM S8 FOR D.T8;
-- 用户A查询表T8的行数
SELECT COUNT(*) FROM S8;
-- 用户D创建函数GET_DBA3
CREATE OR REPLACE FUNCTION GET_DBA3(a INT, b INT) RETURN INT AS
BEGIN
    RETURN a * b;
END;
/

-- 用户D创建全局同义词SP_CLOSE_SESSION2
CREATE OR REPLACE PUBLIC SYNONYM SP_CLOSE_SESSION2 FOR GET_DBA3;
-- 用户D调用同义词SP_CLOSE_SESSION2
CALL SP_CLOSE_SESSION2(3, 4)