-- 创建模式
CREATE SCHEMA schema1;
CREATE SCHEMA schema2;
-- 创建表
CREATE TABLE schema1.table1 (id INT, name VARCHAR(50));
CREATE TABLE schema1.table2 (id INT, name VARCHAR(50));
CREATE TABLE schema2.table3 (id INT, name VARCHAR(50));
CREATE TABLE schema2.table4 (id INT, name VARCHAR(50));
-- 插入数据
INSERT INTO schema1.table1 (id, name) VALUES (1, 'Alice');
INSERT INTO schema1.table2 (id, name) VALUES (2, 'Bob');
INSERT INTO schema2.table3 (id, name) VALUES (3, 'Charlie');
INSERT INTO schema2.table4 (id, name) VALUES (4, 'David');
-- 1. 意向共享锁 (INTENT SHARE)
LOCK TABLE schema1.table1 IN INTENT SHARE MODE;
-- 2. 意向共享锁 (ROW SHARE)
LOCK TABLE schema1.table2 IN ROW SHARE MODE;
-- 3. 意向共享锁 (SHARE UPDATE)
LOCK TABLE schema2.table3 IN SHARE UPDATE MODE;
-- 4. 意向排他锁 (INTENT EXCLUSIVE)
LOCK TABLE schema2.table4 IN INTENT EXCLUSIVE MODE;
-- 5. 意向排他锁 (ROW EXCLUSIVE)
LOCK TABLE schema1.table1 IN ROW EXCLUSIVE MODE;
-- 6. 共享锁 (SHARE)
LOCK TABLE schema1.table2 IN SHARE MODE;
-- 7. 排他锁 (EXCLUSIVE)
LOCK TABLE schema2.table3 IN EXCLUSIVE MODE;
-- 8. 共享意向排他锁 (SHARE INTENT EXCLUSIVE)
LOCK TABLE schema2.table4 IN SHARE INTENT EXCLUSIVE MODE;
-- 9. 共享意向排他锁 (SHARE ROW EXCLUSIVE)
LOCK TABLE schema1.table1 IN SHARE ROW EXCLUSIVE MODE;
-- 10. 意向共享锁 (INTENT SHARE) 带 NOWAIT
LOCK TABLE schema1.table2 IN INTENT SHARE MODE NOWAIT;
-- 11. 意向排他锁 (INTENT EXCLUSIVE) 带 NOWAIT
LOCK TABLE schema2.table3 IN INTENT EXCLUSIVE MODE NOWAIT;
-- 12. 共享锁 (SHARE) 带 NOWAIT
LOCK TABLE schema2.table4 IN SHARE MODE NOWAIT;
-- 13. 排他锁 (EXCLUSIVE) 带 NOWAIT
LOCK TABLE schema1.table1 IN EXCLUSIVE MODE NOWAIT;
-- 14. 共享意向排他锁 (SHARE INTENT EXCLUSIVE) 带 NOWAIT
LOCK TABLE schema1.table2 IN SHARE INTENT EXCLUSIVE MODE NOWAIT;
-- 15. 共享意向排他锁 (SHARE ROW EXCLUSIVE) 带 NOWAIT
LOCK TABLE schema2.table3 IN SHARE ROW EXCLUSIVE MODE NOWAIT;
-- 16. 意向共享锁 (INTENT SHARE) 在另一个模式下的表
LOCK TABLE schema2.table4 IN INTENT SHARE MODE;
-- 17. 意向排他锁 (INTENT EXCLUSIVE) 在另一个模式下的表
LOCK TABLE schema1.table1 IN INTENT EXCLUSIVE MODE;
-- 18. 共享锁 (SHARE) 在另一个模式下的表
LOCK TABLE schema2.table2 IN SHARE MODE;
-- 19. 排他锁 (EXCLUSIVE) 在另一个模式下的表
LOCK TABLE schema1.table3 IN EXCLUSIVE MODE;
-- 20. 共享意向排他锁 (SHARE INTENT EXCLUSIVE) 在另一个模式下的表
LOCK TABLE schema2.table4 IN SHARE INTENT EXCLUSIVE MODE;
-- 21. 共享意向排他锁 (SHARE ROW EXCLUSIVE) 在另一个模式下的表
LOCK TABLE schema1.table1 IN SHARE ROW EXCLUSIVE MODE;
-- 22. 意向共享锁 (INTENT SHARE) 在另一个模式下的表带 NOWAIT
LOCK TABLE schema2.table2 IN INTENT SHARE MODE NOWAIT;
-- 23. 意向排他锁 (INTENT EXCLUSIVE) 在另一个模式下的表带 NOWAIT
LOCK TABLE schema1.table3 IN INTENT EXCLUSIVE MODE NOWAIT;
-- 24. 共享锁 (SHARE) 在另一个模式下的表带 NOWAIT
LOCK TABLE schema2.table4 IN SHARE MODE NOWAIT;
-- 25. 排他锁 (EXCLUSIVE) 在另一个模式下的表带 NOWAIT
LOCK TABLE schema1.table1 IN EXCLUSIVE MODE NOWAIT;
-- 26. 共享意向排他锁 (SHARE INTENT EXCLUSIVE) 在另一个模式下的表带 NOWAIT
LOCK TABLE schema2.table2 IN SHARE INTENT EXCLUSIVE MODE NOWAIT;
-- 27. 共享意向排他锁 (SHARE ROW EXCLUSIVE) 在另一个模式下的表带 NOWAIT
LOCK TABLE schema1.table3 IN SHARE ROW EXCLUSIVE MODE NOWAIT