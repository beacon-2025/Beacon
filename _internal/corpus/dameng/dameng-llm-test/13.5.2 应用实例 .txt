-- 创建复数对象类型
CREATE TYPE COMPLEX AS OBJECT(
    RPART  REAL,
    IPART  REAL,
    FUNCTION PLUS(X COMPLEX) RETURN COMPLEX,
    FUNCTION LES(X COMPLEX) RETURN COMPLEX
);
/

-- 创建复数对象类型的主体
CREATE TYPE BODY COMPLEX AS
    FUNCTION PLUS(X COMPLEX) RETURN COMPLEX IS
    BEGIN
        RETURN COMPLEX(RPART+X.RPART, IPART+X.IPART);
END;
FUNCTION LES(X COMPLEX) RETURN COMPLEX IS
    BEGIN
        RETURN COMPLEX(RPART-X.RPART, IPART-X.IPART);
END;
END;
/;
-- 创建表 C_TAB
CREATE TABLE C_TAB(C1 INT, C2 COMPLEX);
-- 向表 C_TAB 中插入数据
INSERT INTO C_TAB VALUES(1, COMPLEX(2,3));
INSERT INTO C_TAB VALUES(2, COMPLEX(4,2).PLUS(COMPLEX(2,3)));
-- 创建表 C_TAB2
CREATE TABLE C_TAB2(C1 INT, C2 COMPLEX);
-- 向表 C_TAB2 中插入数据
INSERT INTO C_TAB2 VALUES(1, COMPLEX(5,7));
INSERT INTO C_TAB2 VALUES(2, COMPLEX(3,4).PLUS(COMPLEX(1,2)));
-- 创建表 C_TAB3
CREATE TABLE C_TAB3(C1 INT, C2 COMPLEX);
-- 向表 C_TAB3 中插入数据
INSERT INTO C_TAB3 VALUES(1, COMPLEX(10,5));
INSERT INTO C_TAB3 VALUES(2, COMPLEX(8,3).LES(COMPLEX(2,1)));
-- 查询表 C_TAB 中的数据
SELECT C1, C2.RPART, C2.IPART FROM C_TAB;
-- 查询表 C_TAB2 中的数据
SELECT C1, C2.RPART, C2.IPART FROM C_TAB2;
-- 查询表 C_TAB3 中的数据
SELECT C1, C2.RPART, C2.IPART FROM C_TAB3;
-- 更新表 C_TAB 中的数据
UPDATE C_TAB SET C2 = COMPLEX(6,9) WHERE C1 = 1;
-- 更新表 C_TAB2 中的数据
UPDATE C_TAB2 SET C2 = COMPLEX(4,5).PLUS(COMPLEX(1,1)) WHERE C1 = 2;
-- 更新表 C_TAB3 中的数据
UPDATE C_TAB3 SET C2 = COMPLEX(7,2).LES(COMPLEX(3,1)) WHERE C1 = 1;
-- 删除表 C_TAB 中的数据
DELETE FROM C_TAB WHERE C1 = 1;
-- 删除表 C_TAB2 中的数据
DELETE FROM C_TAB2 WHERE C1 = 2;
-- 删除表 C_TAB3 中的数据
DELETE FROM C_TAB3 WHERE C1 = 1;
-- 删除表 C_TAB
DROP TABLE C_TAB;
-- 删除表 C_TAB2
DROP TABLE C_TAB2;
-- 删除表 C_TAB3
DROP TABLE C_TAB3;
-- 删除复数对象类型
DROP TYPE COMPLEX